(()=>{"use strict";function e(e,t){const n=t.children;for(const t of e)n[t[0]].children[t[1]].classList.add("paint__over-green")}const t=document.querySelector(".game-score-for-cross"),n=document.querySelector(".game-score-for-zeros"),r=document.querySelector(".player__move-number");let o=0,c=0,i=0,s=0,l=0,u=!1;function a(e,t){e.innerHTML="",t.classList.add("hidden"),u=!1,i=0}function d(e){for(let t=0;t<e.length;t++)f(e[t]);return e}function f(e){for(let t=0;t<e.length;t++)e[t]=0;return e}function m(e){const t=[];for(let n=0;n<e;n++)t.push(new Array(e).fill(0));return t}function g(e,t,n,r){const{coordinates:{line:o,column:c},numberOfSymbolsToWin:i}=e;let s=[];for(let e=0,l=0,u=o,a=c;e<t[o].length;e++){if(u>=t[o].length||u<0||a>=t[o].length||a<0)return null;if(1==t[u][a]){if(s.push([u,a]),l++,u=n(u),a=r(a),l==i)return s}else s=[],l=0,u=n(u),a=r(a)}return null}function L(t,n){const{playingField:r}=t,o=function(e,t){const{coordinates:{line:n,column:r},numberOfSymbolsToWin:o}=e;let c=[];for(let e=0,r=0;e<t[n].length;e++)if(1==t[n][e]){if(c.push([n,e]),r++,r==o)return c}else c=[],r=0;c=[];for(let e=0,n=0;e<t[r].length;e++)if(1==t[e][r]){if(c.push([e,r]),n++,n==o)return c}else c=[],n=0;return null}(t,n),c=function(e,t){const n=g(e,t,(function(e){return++e}),(function(e){return++e}));if(n)return n;const r=g(e,t,(function(e){return--e}),(function(e){return--e}));if(r)return r;const o=g(e,t,(function(e){return--e}),(function(e){return++e}));return o||(g(e,t,(function(e){return++e}),(function(e){return--e}))||void 0)}(t,n);return o?(e(o,r),u=!0):!!c&&(e(c,r),u=!0)}function y(e){if(!0===u)return;const{cell:o,coordinates:{line:c,column:a},fields:{crosses:d,zeros:f}}=e;if(o.classList.contains("image-symbol")||o.classList.contains("filled"))return;o.classList.add("filled"),i?(o.innerHTML='<img class="image-symbol zero-img" src="images/zero.png" alt="zero">',f[c][a]=1,r.innerHTML="Ходят крестики ❌"):(o.innerHTML='<img class="image-symbol cross-img" src="images/cross.png" alt="cross">',d[c][a]=1,r.innerHTML="Ходят нолики ⭕"),i=!i;const m=e.fields.crosses,g=e.fields.zeros;!0===L(e,m)?(r.innerHTML="❌Победа крестиков!❌",s++,t.innerHTML=`${s}`):!0===L(e,g)&&(r.innerHTML="⭕Победа ноликов!⭕",l++,n.innerHTML=`${l}`)}const h=document.querySelector(".title__tic-tac-toe");fetch("http://localhost:3000/test").then((function(e){return 200!==e.status?Promise.reject(new Error(e.statusText)):Promise.resolve(e)})).then((function(e){return e.json()})).then((function(e){e=JSON.parse(e),h.innerHTML=e})).catch((function(e){console.log(e)}));const v=document.querySelector(".playing__field"),p=document.querySelector(".menu-section"),S=document.querySelector("#cell"),T=document.querySelector(".button-play-3x3"),q=document.querySelector(".button-play-NxN"),b=document.querySelector(".button-play-again"),H=document.querySelector(".img-restart"),M=document.querySelector(".condition-for-NxN"),E=document.querySelector(".btn-go");let N=[],_=[];function z(e){const t=document.querySelector(".menu-list").querySelector(".active");if(e.classList.contains("active-game"))e.classList.toggle("active-game");else if(t){if(e===t)return t.classList.remove("active"),void a(v,p);t.classList.remove("active"),e.classList.add("active")}else e.classList.add("active")}function k(e,t,n,r,o){N=m(t),_=m(t);for(let o=0;o<t;o++){const c=document.createElement("tr");for(let i=0;i<t;i++){const t=n.content.cloneNode(!0).firstElementChild;t.dataset.index=`${o}${i}`;const s={cell:event,coordinates:{line:o,column:i},fields:{crosses:N,zeros:_},playingField:e,numberOfSymbolsToWin:r};c.appendChild(t),t.addEventListener("click",(e=>{s.cell=e.target,y(s)})),e.appendChild(c)}p.classList.remove("hidden")}}T.addEventListener("click",(e=>{o=3,c=3,k(v,o,S,c,e.target),z(e.target),M.classList.add("hidden")})),q.addEventListener("click",(e=>{a(v,p),z(e.target),M.classList.toggle("hidden")})),E.addEventListener("click",(()=>{const e=document.createElement("small");if(M.append(e),o=+document.querySelector(".input-for-N").value,c=+document.querySelector(".input-for-K").value,0==o||0==c)return alert("Некорректные данные!"),e.style.color="red",void(e.textContent="Некорректные данные!");M.classList.add("hidden"),q.classList.add("active-game"),k(v,o,S,c)})),H.addEventListener("click",(()=>{H.classList.toggle("rotate"),s=0,l=0,n.innerHTML="0",t.innerHTML="0"})),b.addEventListener("click",(()=>{N=d(N),_=d(_),function(e){u=!1;for(const t of e.children)for(const e of t.children)e.innerHTML="",e.className="cell";i=0,r.innerHTML="Ходят крестики ❌"}(v)}))})();
//# sourceMappingURL=bundle.js.map